<div class="container">
  <div class="row">
    <div class="col-8">
      <form [formGroup]="suppliesEditForm" (ngSubmit)="editSupplies()">
        <h2 class="text-center mt-4">Chỉnh sửa vật tư</h2>
        <div class="form-group row mt-5">
          <div class="col-3">
            <label for="ma-vat-tu" class="mr-3">Mã vật tư <span style="color: red">(*)</span></label>
          </div>
          <div class="col-9">
            <input type="text" id="ma-vat-tu" class="form-control" formControlName="code">
            <div *ngIf="!code.valid && (code.dirty || code.touched)">
              <div style="color: red" [hidden]="!code.errors.required">
                Trường này không được để trống
              </div>
              <div style="color: red" [hidden]="!code.errors.pattern">
                Phải đúng định dạng MVT-xxxx
              </div>
            </div>
          </div>
        </div>
        <div class="form-group row ">
          <div class="col-3">
            <label for="ten-vat-tu" class="mr-3">Tên vật tư <span style="color: red">(*)</span></label>
          </div>
          <div class="col-9">
            <input type="text" id="ten-vat-tu" class="form-control" formControlName="name">
            <div *ngIf="!name.valid && (name.dirty || name.touched)">
              <div style="color:red" [hidden]="!name.errors.required">
                Trường này không được để trống
              </div>
            </div>
          </div>
        </div>
        <div class="form-group row ">
          <div class="col-3">
            <label for="loai-vat-tu" class="mr-3">Loại vật tư<span style="color: red">(*)</span></label>
          </div>
          <div class="col-9">
            <select name="" id="loai-vat-tu" class="form-control" formControlName="suppliesType" [compareWith]="compareSuppliesType">
              <option selected [value]="null" disabled>Chọn danh mục sản phẩm</option>
              <option *ngFor="let s of suppliesTypes" [value]="s.id">{{s.name}}</option>
            </select>
            <div *ngIf="!suppliesType.valid && (suppliesType.dirty || suppliesType.touched)">
              <div style="color: red" [hidden]="!suppliesType.errors.required">Trường này không được để trống</div>
            </div>
          </div>
        </div>
        <div class="form-group row ">
          <div class="col-3">
            <label for="gia-thanh" class="mr-3">Giá thành<span style="color: red">(*)</span></label>
          </div>
          <div class="col-9">
            <input type="text" min="0" id="gia-thanh" class="form-control" formControlName="price">
            <div *ngIf="!price.valid && (price.dirty|| price.touched)">
              <div style="color: red" [hidden]="!price.errors.required">
                Trường này không được để trống
              </div>
            </div>
          </div>
        </div>
        <div class="form-group row ">
          <div class="col-3">
            <label for="ngay-san-xuat" class="mr-3">Ngày sản xuất <span style="color: red">(*)</span></label>
          </div>
          <div class="col-9">
            <input type="date" id="ngay-san-xuat" class="form-control" formControlName="productionDate">
            <div *ngIf="!productionDate.valid && (productionDate.dirty || productionDate.touched)">
              <div style="color: red" [hidden]="!productionDate.errors.required">Trường này không được để trống</div>
              <div style="color: red" [hidden]="!productionDate.errors.pattern">Phải đúng định dạng: dd/MM/yyyy</div>
            </div>
          </div>
        </div>
        <div class="form-group row ">
          <div class="col-3">
            <label for="han-su-dung" class="mr-3">Hạn sử dụng <span style="color: red">(*)</span></label>
          </div>
          <div class="col-9">
            <input type="date" id="han-su-dung" class="form-control" formControlName="expiryDate">
            <div *ngIf="!expiryDate.valid && (expiryDate.dirty || expiryDate.touched)">
              <div style="color: red" [hidden]="!expiryDate.errors.required">Trường này không được để trống</div>
              <div style="color: red" [hidden]="!expiryDate.errors.pattern">Phải đúng định dạng: dd/MM/yyyy</div>
            </div>
          </div>
        </div>
        <div class="form-group row">
          <div class="col-3">
            <label for="nha-cung-cap" class="mr-3">Nhà cung cấp<span style="color: red">(*)</span></label>
          </div>
          <div class="col-9">
            <select name="" id="nha-cung-cap" class="form-control" formControlName="producer" [compareWith]="compareProducer">
              <option selected disabled [value]="null">Chọn nhà cung cấp</option>
              <option *ngFor="let producer of producers" [value]="producer.id">{{producer.name}}</option>
            </select>
            <div *ngIf="!producer.valid && (producer.dirty ||producer.touched)">
              <div style="color: red" [hidden]="!producer.errors.required">Trường này không được để trống</div>
            </div>
          </div>
        </div>
        <div class="form-group row ">
          <div class="col-3">
            <label for="mo-ta" class="mr-3">Giới thiệu<span style="color: red">(*)</span></label>
          </div>
          <div class="col-9">
            <textarea id="mo-ta" class="form-control" rows="5" cols="40" formControlName="introduce"></textarea>
            <div *ngIf="!introduce.valid && (introduce.dirty ||introduce.touched)">
              <div style="color: red" [hidden]="!introduce.errors.required">Trường này không được để trống</div>
            </div>
          </div>
        </div>
        <div class="form-group row ">
          <div class="col-3">
            <label for="thong-tin" class="mr-3">Thông tin kỹ thuật<span style="color: red">(*)</span></label>
          </div>
          <div class="col-9">
            <textarea id="thong-tin" class="form-control" rows="5" cols="40"
                      formControlName="technicalInformation"></textarea>
            <div *ngIf="!technicalInformation.valid && (technicalInformation.dirty ||technicalInformation.touched)">
              <div style="color: red" [hidden]="!technicalInformation.errors.required">Trường này không được để trống</div>
            </div>
          </div>
        </div>
        <div class=" row form-group">
          <label class="col-3 col-form-label" for="avarta">Chọn ảnh<span style="color: red">(*)</span> </label>
          <div class="col-sm-4">
            <input type="file" accept="image/*" onchange="loadFile(event)" id="avarta" formControlName="image">
            <img id="output" width="150" height="150px"/>
            <div *ngIf="!image.valid && (image.dirty ||image.touched)">
              <div style="color: red" [hidden]="!image.errors.required">Trường này không được để trống</div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-12 text-center">
            <div class="col-12 text-center">
              <button type="submit" class="btn btn-primary mr-5" [disabled]="!suppliesEditForm.valid"
                      style="width: 100px;height: 40px">Thêm mới
              </button>
              <button type="submit" class="btn btn-secondary" routerLink="/supplies/list"
                      style="width: 100px;height: 40px">Hủy
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

